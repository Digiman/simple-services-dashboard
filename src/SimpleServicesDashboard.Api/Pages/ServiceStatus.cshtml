@page "{serviceCode}/{environment}"
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model SimpleServicesDashboard.Api.Pages.ServiceStatus

@{
    Layout = null;
}

<!DOCTYPE html>

<html lang="en">
<head>
    <title>Service Status Details</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col">
            <h1>@Model.ServiceStatusViewModel.ServiceName</h1>
            <div>
                <p>Details about specific service. This details comes from the Status endpoint on the service and can be fetched for the each service. Here just to check if the service is working.</p>
            </div>
            <div class="row g-3">
                <label for="aboutUrl" class="col-sm-1 col-form-label">Status endpoint</label>
                <div class="col-sm-10">
                    <input class="form-control" id="aboutUrl" aria-describedby="environmentHelp" value="@Model.ServiceStatusViewModel.AboutUrl" disabled>
                    <div id="aboutUrlHelp" class="form-text">The URL to call the service to get the status (used here to fetch the data from the service).</div>
                </div>
                <div class="col-sm-1">
                    <a class="btn btn-primary" href="@Model.ServiceStatusViewModel.AboutUrl" target="_blank">Open <i class="bi bi-box-arrow-up-right"></i></a>
                </div>
            </div>
            <div class="row g-3">
                <label for="healthUrl" class="col-sm-1 col-form-label">Health endpoint</label>
                <div class="col-sm-10">
                    <input class="form-control" id="healthUrl" aria-describedby="environmentHelp" value="@Model.ServiceStatusViewModel.HealthUrl" disabled>
                    <div id="healthUrlHelp" class="form-text">The URL to get health of the service in general.</div>
                </div>
                <div class="col-sm-1">
                    <a class="btn btn-primary" href="@Model.ServiceStatusViewModel.HealthUrl" target="_blank">Open <i class="bi bi-box-arrow-up-right"></i></a>
                </div>
            </div>
            <div class="row g-3">
                <label for="healthDashboardUrl" class="col-sm-1 col-form-label">Healthcheck Dashboard</label>
                <div class="col-sm-10">
                    <input class="form-control" id="healthDashboardUrl" aria-describedby="environmentHelp" value="@Model.ServiceStatusViewModel.HealthcheckDashboardUrl" disabled>
                    <div id="healthDashboardUrlHelp" class="form-text">The URL to see healthcheck dashboard of the actual service.</div>
                </div>
                <div class="col-sm-1">
                    <a class="btn btn-primary" href="@Model.ServiceStatusViewModel.HealthcheckDashboardUrl" target="_blank">Open <i class="bi bi-box-arrow-up-right"></i></a>
                </div>
            </div>
            <div class="row g-3">
                <label for="swaggerUrlHelp" class="col-sm-1 col-form-label">Swagger UI</label>
                <div class="col-sm-10">
                    <input class="form-control" id="swaggerUrl" aria-describedby="environmentHelp" value="@Model.ServiceStatusViewModel.SwaggerdUrl" disabled>
                    <div id="swaggerUrlHelp" class="form-text">The URL to see the Swagger UI with API documentation.</div>
                </div>
                <div class="col-sm-1">
                    <a class="btn btn-primary" href="@Model.ServiceStatusViewModel.SwaggerdUrl" target="_blank">Open <i class="bi bi-box-arrow-up-right"></i></a>
                </div>
            </div>
            <div class="row g-2">
                <label for="environment" class="col-sm-1 col-form-label">Environment</label>
                <div class="col-sm-11">
                    <input class="form-control" id="environment" aria-describedby="environmentHelp" value="@Model.ServiceStatusViewModel.Environment" disabled>
                    <div id="environmentHelp" class="form-text">Environment name for the service details.</div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <label for="status" class="form-label">Service status</label>
                    <textarea class="form-control" id="status" aria-describedby="statusHelp" rows="10">@Model.ServiceStatusViewModel.StatusData</textarea>
                    <div id="statusHelp" class="form-text">Details from the service in JSON (status endpoint result).</div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <a asp-page="/Dashboard" class="btn btn-primary"><i class="bi bi-arrow-left-circle"></i> Go back to the dashboard</a>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
